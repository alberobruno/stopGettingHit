/**
 * Copyright IBM Corp. 2016, 2023
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var React = require('react');

/**
 * @param {Element|Document|Window|object} [trigger=document] The element or ref which should trigger the Menu on right-click
 * @returns {object} Props object to pass onto Menu component
 */
function useContextMenu() {
  let trigger = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;
  const [open, setOpen] = React.useState(false);
  const [position, setPosition] = React.useState([0, 0]);
  function openContextMenu(e) {
    e.preventDefault();
    const {
      x,
      y
    } = e;
    setPosition([x, y]);
    setOpen(true);
  }
  function onClose() {
    setOpen(false);
  }
  React.useEffect(() => {
    const el = trigger?.current ?? trigger;
    if (el && el instanceof Element || el instanceof Document || el instanceof Window) {
      el.addEventListener('contextmenu', openContextMenu);
      return () => {
        el.removeEventListener('contextmenu', openContextMenu);
      };
    }
  }, [trigger]);
  return {
    open,
    x: position[0],
    y: position[1],
    onClose
  };
}

exports["default"] = useContextMenu;
